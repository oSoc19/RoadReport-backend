DROP TABLE IF EXISTS `iptable_whitelist`;

CREATE TABLE `iptable_whitelist` (
  `ip_address` varchar(15) NOT NULL,
  PRIMARY KEY (`ip_address`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

LOCK TABLES `iptable_whitelist` WRITE;
INSERT INTO `iptable_whitelist` VALUES ('127.0.0.1');
UNLOCK TABLES;


DROP TABLE IF EXISTS `location`;
CREATE TABLE `location` (
  `lid` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `street` varchar(63) NOT NULL,
  `number` varchar(8) DEFAULT NULL,
  `city` varchar(63) NOT NULL,
  `longitude` decimal(18,15) DEFAULT '0.000000000000000',
  `latitude` decimal(18,15) DEFAULT '0.000000000000000',
  PRIMARY KEY (`lid`),
  UNIQUE KEY `location_UN` (`street`,`number`,`city`)
) ENGINE=InnoDB AUTO_INCREMENT=0 DEFAULT CHARSET=utf8;


DROP TABLE IF EXISTS `params`;
CREATE TABLE `params` (
  `k` varchar(255) NOT NULL,
  `v` text,
  PRIMARY KEY (`k`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

LOCK TABLES `params` WRITE;
INSERT INTO `params` VALUES ('area','{\"type\":\"FeatureCollection\",\"features\":[{\"id\":\"2d2ee77b23e957b8752beadf85ee36b3\",\"type\":\"Feature\",\"properties\":{},\"geometry\":{\"coordinates\":[[[3.7870610898191046,51.16714546476129],[3.759656846846326,51.16257515947751],[3.763155260854404,51.14556964781326],[3.7762743133433503,51.14831289620304],[3.7675282783349644,51.13349741777071],[3.7552838293420905,51.12160501464487],[3.7354594833592785,51.11044166622216],[3.7165097408725956,51.103303029942],[3.6803594628914027,51.088473108322546],[3.6646165994591513,51.08297933745416],[3.6695726859607305,51.080049059622326],[3.6573282369678566,51.074371118111486],[3.6564536334717843,51.08059850085277],[3.6404192359721037,51.077851229438124],[3.638378494481202,51.083162473655335],[3.629340924997706,51.07913330972974],[3.615638803487684,51.06392921358295],[3.6083504409964178,51.05586718480103],[3.585319215102942,51.045421105507984],[3.575407042099698,51.026538880871385],[3.597272129597087,51.020487608470575],[3.606309699080583,51.027455671421734],[3.6208864240630874,51.03240602702576],[3.63546314906921,51.02562207219489],[3.6398361665497703,51.01902051438833],[3.6447922530514063,51.02140451870466],[3.6561620980420457,51.01810355684054],[3.650622942542981,51.01186776572109],[3.655870563543317,51.00563113601456],[3.6608266500449247,51.01131750859926],[3.6724880300167797,51.005447693034455],[3.6756949095261575,50.9988432625596],[3.683274806516124,50.99590765833037],[3.6940615830154684,50.992054395914124],[3.702224549002807,50.986365661854336],[3.6998922730131483,50.98141038988899],[3.7068891010057143,50.97590391176769],[3.7098044459927735,50.97480253777488],[3.716801273985311,50.97957496974172],[3.7249642399962966,50.98599862281205],[3.7264219124897977,50.996641576797856],[3.731377998711025,50.99976060064071],[3.746829327189687,50.9999440661104],[3.748286999683188,51.00783239504091],[3.7389578957009917,51.00966669789619],[3.741873240688051,51.014435545815275],[3.745371654696129,51.01847034181014],[3.746829327189687,51.02397177055175],[3.750036206699008,51.024338509254676],[3.763738328185468,51.01626958751922],[3.7684028801883187,51.02012083898106],[3.7710266906766208,51.02452187751811],[3.780355794658874,51.02855579581595],[3.7876441571737303,51.02855579581595],[3.7885187606698594,51.032772698677036],[3.7928917781504197,51.03845574328065],[3.791725640155647,51.04542110518696],[3.7771489151731146,51.049269934836616],[3.7660706041750416,51.04908666448685],[3.7669452076711707,51.05256867713541],[3.7523684826886665,51.05055280698619],[3.761406052172134,51.05403470940334],[3.7587822416837753,51.05806605882236],[3.765487535177641,51.06191383767165],[3.7847288121631095,51.0653948858365],[3.811258451639759,51.07162347657777],[3.7963901921584977,51.08883933597039],[3.7981393991507275,51.091585954869004],[3.793766381670139,51.095797120353495],[3.7899764331633605,51.09524785965013],[3.788810295168588,51.10714704749361],[3.799597071644257,51.10897741993324],[3.817348372672768,51.12045364253078],[3.8235696690306327,51.131663227934894],[3.8330019570649085,51.13393000435161],[3.8629043171033572,51.154829475465476],[3.8364136355625362,51.16905081113728],[3.834808139572118,51.20326472131373],[3.8207600509938118,51.20867121308811],[3.7956741785673955,51.21156279700131],[3.7856398295805604,51.19119212383484],[3.7870610898191046,51.16714546476129]]],\"type\":\"Polygon\"}}]}'),('area_height','0.23676025922631'),('area_offsetX','3.5754070420997'),('area_offsetY','50.974802537775'),('area_width','0.28749727500366'),('dash_pass','acd9bca93f9aac5246ef6329d919cd37'),('dash_user','moderator');
UNLOCK TABLES;


DROP TABLE IF EXISTS `problem`;
CREATE TABLE `problem` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `category` int(10) unsigned NOT NULL,
  `tag_name` varchar(63) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `problem_problem_category_FK` (`category`),
  CONSTRAINT `problem_problem_category_FK` FOREIGN KEY (`category`) REFERENCES `problem_category` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=31 DEFAULT CHARSET=utf8;

LOCK TABLES `problem` WRITE;
INSERT INTO `problem` VALUES (1,1,'{{PROBLEM_1}}'),(2,1,'{{PROBLEM_2}}'),(3,1,'{{PROBLEM_3}}'),(4,1,'{{PROBLEM_4}}'),(5,1,'{{PROBLEM_5}}'),(6,1,'{{PROBLEM_6}}'),(7,1,'{{PROBLEM_7}}'),(8,1,'{{PROBLEM_8}}'),(9,1,'{{PROBLEM_9}}'),(10,1,'{{PROBLEM_10}}'),(11,1,'{{PROBLEM_11}}'),(12,2,'{{PROBLEM_12}}'),(13,2,'{{PROBLEM_13}}'),(14,2,'{{PROBLEM_14}}'),(15,2,'{{PROBLEM_15}}'),(16,2,'{{PROBLEM_16}}'),(17,3,'{{PROBLEM_17}}'),(18,3,'{{PROBLEM_18}}'),(19,3,'{{PROBLEM_19}}'),(20,3,'{{PROBLEM_20}}'),(21,3,'{{PROBLEM_21}}'),(22,4,'{{PROBLEM_22}}'),(23,4,'{{PROBLEM_23}}'),(24,4,'{{PROBLEM_24}}'),(25,5,'{{PROBLEM_25}}'),(26,5,'{{PROBLEM_26}}'),(27,5,'{{PROBLEM_27}}'),(28,5,'{{PROBLEM_28}}'),(29,5,'{{PROBLEM_29}}'),(30,5,'{{PROBLEM_30}}');
UNLOCK TABLES;

DROP TABLE IF EXISTS `problem_category`;
CREATE TABLE `problem_category` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `tag_name` varchar(63) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=6 DEFAULT CHARSET=utf8;

LOCK TABLES `problem_category` WRITE;
INSERT INTO `problem_category` VALUES (1,'{{CATEGORY_1}}'),(2,'{{CATEGORY_2}}'),(3,'{{CATEGORY_3}}'),(4,'{{CATEGORY_4}}'),(5,'{{CATEGORY_5}}');
UNLOCK TABLES;


DROP TABLE IF EXISTS `report`;
CREATE TABLE `report` (
  `rid` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `problem` int(10) unsigned NOT NULL,
  `comment` text,
  `location` int(10) unsigned NOT NULL,
  `timestamp` bigint(20) NOT NULL,
  `picture_link` varchar(54) DEFAULT NULL,
  `status` varchar(100) DEFAULT 'REPORTED',
  `status_date` bigint(20) DEFAULT '0',
  PRIMARY KEY (`rid`),
  KEY `report_problem_IDX` (`problem`) USING BTREE,
  KEY `location` (`location`),
  CONSTRAINT `report_problem_FK` FOREIGN KEY (`problem`) REFERENCES `problem` (`id`),
  CONSTRAINT `report_ibfk_1` FOREIGN KEY (`location`) REFERENCES `location` (`lid`)
) ENGINE=InnoDB AUTO_INCREMENT=0 DEFAULT CHARSET=utf8;
